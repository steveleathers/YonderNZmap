<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="style.css">
    <style type="text/css">
      html, body, #map-canvas { height: 100%; margin: 0; padding: 0;}
    </style>
    <script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD-5s3-hbMp9bmLMLBp0OOAxnzvo2eDQcY">
    </script>
    <script type="text/javascript">
      var infowindow = new google.maps.InfoWindow();
      function gotoFeature(featureNum) {
          var feature = map.data.getFeatureById(features[featureNum].getId());
          if (!!feature) google.maps.event.trigger(feature, 'changeto', {feature: feature});
          else alert('feature not found!');
      }
      function initialize() {

        features=[];
        // var styles = [{
        //   stylers: [
        //     { lightness: 30 }
        //   ]
        // }];


        // var styledMap = new google.maps.StyledMapType(styles, {name: "Styled Map"});

        var mapOptions = {
          center: { lat: -44.862929, lng: 170.087861},
          zoom: 8,
          maxZoom: 12,
          minZoom: 7,
          scrollwheel: false,
          mapTypeId: google.maps.MapTypeId.SATELLITE,
          // mapTypeControlOptions: {
          //   mapTypeIds: [google.maps.MapTypeId.SATELLITE, 'map_style']
          // },
        };

        var map = new google.maps.Map(document.getElementById('map-canvas'),
            mapOptions);

        var dayOne = new google.maps.KmlLayer({
          url: 'https://dl.dropboxusercontent.com/u/5653604/day1g.kml',
          map: map,
          preserveViewport: true
        });
        var dayTwo = new google.maps.KmlLayer({
          url: 'https://dl.dropboxusercontent.com/u/5653604/day2g.kml',
          map: map,
          preserveViewport: true
        });
        var dayThree = new google.maps.KmlLayer({
          url: 'https://dl.dropboxusercontent.com/u/5653604/day3g.kml',
          map: map,
          preserveViewport: true
        });
        var dayFour = new google.maps.KmlLayer({
          url: 'https://dl.dropboxusercontent.com/u/5653604/day4g.kml',
          map: map,
          preserveViewport: true
        });
        var dayFive = new google.maps.KmlLayer({
          url: 'https://dl.dropboxusercontent.com/u/5653604/day5g.kml',
          map: map,
          preserveViewport: true
        });
        var daySix = new google.maps.KmlLayer({
          url: 'https://dl.dropboxusercontent.com/u/5653604/helirescue.kml',
          map: map,
          preserveViewport: true
        });
        // var photos = new google.maps.KmlLayer({
        //   url: 'https://dl.dropboxusercontent.com/u/5653604/photosaggregate.kml',
        //   map: map,
        //   preserveViewport: true
        // });
        map.data.loadGeoJson('https://dl.dropboxusercontent.com/u/5653604/photosaggregate.geojson');
        map.data.setStyle({
          icon: 'https://dl.dropboxusercontent.com/u/5653604/CameraWhite30.png'
        });
        map.data.addListener('click', function(event) {
                  var myHTML = event.feature.getProperty("description");
              infowindow.setContent(myHTML);
                  infowindow.setPosition(event.feature.getGeometry().get());
              infowindow.setOptions({pixelOffset: new google.maps.Size(0,-30)});
                  infowindow.open(map);
          });
        // var infowindow = new google.maps.InfoWindow();
        // map.data.addListener('click', function(event) {
        //  var myHTML = event.feature.getProperty("Description");
        //  infowindow.setContent("<div style='width:150px; text-align: center;'>"+myHTML+"</div>");
        //  infowindow.setPosition(event.feature.getGeometry().get());
        //  infowindow.setOptions({pixelOffset: new google.maps.Size(0,-30)});
        //  infowindow.open(map);
        // });
        // map.mapTypes.set('map_style', styledMap);
        // map.setMapTypeId('map_style');
      }
      google.maps.event.addDomListener(window, 'load', initialize);


    </script>
  </head>
  <body>
    <div id="map-canvas"></div>
  </body>
</html>
